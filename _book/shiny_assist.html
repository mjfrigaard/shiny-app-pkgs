<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.37">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2025-05-27">
<meta name="description" content="Getting your app into an R package">

<title>26&nbsp; Shiny Assistant ‚Äì Shiny App-Packages</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./ellmer.html" rel="next">
<link href="./tools.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-29e2c20b02301cfff04dc8050bf30c7e.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-5e028d03f695a40e3b9c8f0b559e5fd9.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script src="site_libs/quarto-contrib/glightbox/glightbox.min.js"></script>
<link href="site_libs/quarto-contrib/glightbox/glightbox.min.css" rel="stylesheet">
<link href="site_libs/quarto-contrib/glightbox/lightbox.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-sidebar floating slimcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./tools.html">Shiny LLM Tools</a></li><li class="breadcrumb-item"><a href="./shiny_assist.html"><span class="chapter-number">26</span>&nbsp; <span class="chapter-title">Shiny Assistant</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Shiny App-Packages</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/mjfrigaard/shiny-app-pkgs" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Welcome!</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./preface.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./whole_game.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Whole app game</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./shiny.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Shiny</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./packages.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Packages</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./development.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Development</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./app_packages.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">App-packages</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./document.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Documentation</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./dependencies.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Dependencies</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Data</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./launch.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Launch</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./resources.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Resources</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./debug.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Debug</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./debugger.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Debuggers</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./debug_print.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Print debugging</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./debug_apps.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Debugging apps</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./logging.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Logging</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./tests.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Tests</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./test_suite.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Test suite</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./test_specs.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Specifications</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./test_tools.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Test tools</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./test_modules.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Testing modules</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./test_system.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">System tests</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./deploy.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Deploy</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./shinyappsio.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">shinyapps.io</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./docker.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Docker</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./gha.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">GitHub Actions</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./pkgdown.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">pkgdown</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./frameworks.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Frameworks</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./golem.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">golem</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./leprechaun.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">leprechaun</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./rhino.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title">rhino</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./tools.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Shiny LLM Tools</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./shiny_assist.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">26</span>&nbsp; <span class="chapter-title">Shiny Assistant</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ellmer.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">27</span>&nbsp; <span class="chapter-title">ellmer</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chores.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">28</span>&nbsp; <span class="chapter-title">chores</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./gander.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">29</span>&nbsp; <span class="chapter-title">gander</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./special_topics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Special topics</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-8" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./shiny_ui_edit.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">30</span>&nbsp; <span class="chapter-title">üèóÔ∏è Shiny UI Editor</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./code.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">31</span>&nbsp; <span class="chapter-title">Code style</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./app_data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">32</span>&nbsp; <span class="chapter-title">üèóÔ∏è App data</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./entanglement.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">33</span>&nbsp; <span class="chapter-title">üèóÔ∏è Dependency hell</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" role="navigation" aria-expanded="true">
 <span class="menu-text">Appendices</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-9" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./glossary.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">A</span>&nbsp; <span class="chapter-title">Glossary of terms</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./create.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">B</span>&nbsp; <span class="chapter-title">Packages FAQ</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./github.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">C</span>&nbsp; <span class="chapter-title">GitHub</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./bdd.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">D</span>&nbsp; <span class="chapter-title">BDD (code snippet)</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./graph_tests.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">E</span>&nbsp; <span class="chapter-title">Tests (graph outputs)</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./test_mocks.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">F</span>&nbsp; <span class="chapter-title">Tests (mocking)</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./rhino_append.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">G</span>&nbsp; <span class="chapter-title">rhino (CI/CD)</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stack_traces.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">H</span>&nbsp; <span class="chapter-title">üèóÔ∏è Stack traces</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./comparisons.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">I</span>&nbsp; <span class="chapter-title">Comparisons</span></span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active" data-toc-expanded="99">
    <h2 id="toc-title">Contents</h2>
   
  <ul>
  <li><a href="#sec-shiny-assist-ui" id="toc-sec-shiny-assist-ui" class="nav-link active" data-scroll-target="#sec-shiny-assist-ui"><span class="header-section-number">26.1</span> IDE + Chat</a>
  <ul>
  <li><a href="#sec-shiny-assist-p1" id="toc-sec-shiny-assist-p1" class="nav-link" data-scroll-target="#sec-shiny-assist-p1"><span class="header-section-number">26.1.1</span> Prompt 1: Build an app</a></li>
  <li><a href="#sec-shiny-assist-p2" id="toc-sec-shiny-assist-p2" class="nav-link" data-scroll-target="#sec-shiny-assist-p2"><span class="header-section-number">26.1.2</span> Prompt 2: Refine</a></li>
  <li><a href="#sec-shiny-assist-p3" id="toc-sec-shiny-assist-p3" class="nav-link" data-scroll-target="#sec-shiny-assist-p3"><span class="header-section-number">26.1.3</span> Prompt 3: Modularize</a></li>
  <li><a href="#sec-shiny-assist-p4" id="toc-sec-shiny-assist-p4" class="nav-link" data-scroll-target="#sec-shiny-assist-p4"><span class="header-section-number">26.1.4</span> Prompt 4: Structure</a></li>
  <li><a href="#sec-shiny-assist-p5" id="toc-sec-shiny-assist-p5" class="nav-link" data-scroll-target="#sec-shiny-assist-p5"><span class="header-section-number">26.1.5</span> Prompt 5: Error</a></li>
  <li><a href="#sec-shiny-assist-p6" id="toc-sec-shiny-assist-p6" class="nav-link" data-scroll-target="#sec-shiny-assist-p6"><span class="header-section-number">26.1.6</span> Bonus: Theme</a></li>
  </ul></li>
  <li><a href="#sec-shiny-assist-download" id="toc-sec-shiny-assist-download" class="nav-link" data-scroll-target="#sec-shiny-assist-download"><span class="header-section-number">26.2</span> Download files</a></li>
  <li><a href="#sec-shiny-assist-finishing-touches" id="toc-sec-shiny-assist-finishing-touches" class="nav-link" data-scroll-target="#sec-shiny-assist-finishing-touches"><span class="header-section-number">26.3</span> Finishing touches</a>
  <ul>
  <li><a href="#the-app.r-file" id="toc-the-app.r-file" class="nav-link" data-scroll-target="#the-app.r-file"><span class="header-section-number">26.3.1</span> The <code>app.R</code> file</a></li>
  <li><a href="#ggplot2-warnings" id="toc-ggplot2-warnings" class="nav-link" data-scroll-target="#ggplot2-warnings"><span class="header-section-number">26.3.2</span> <code>ggplot2</code> warnings</a></li>
  </ul></li>
  <li><a href="#recap" id="toc-recap" class="nav-link" data-scroll-target="#recap">Recap</a></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/mjfrigaard/shiny-app-pkgs/edit/main/shiny_assist.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/mjfrigaard/shiny-app-pkgs/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content page-columns page-full" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./tools.html">Shiny LLM Tools</a></li><li class="breadcrumb-item"><a href="./shiny_assist.html"><span class="chapter-number">26</span>&nbsp; <span class="chapter-title">Shiny Assistant</span></a></li></ol></nav>
<div class="quarto-title">
<h1 class="title"><span id="sec-shiny-assist" class="quarto-section-identifier"><span class="chapter-number">26</span>&nbsp; <span class="chapter-title">Shiny Assistant</span></span></h1>
</div>



<div class="quarto-title-meta">

    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">2025-05-27</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<div class="callout callout-style-default callout-caution no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-1-contents" aria-controls="callout-1" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span style="font-weight: bold; font-size: 1.15em;">CAUTION</span>
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-1" class="callout-1-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<div style="font-size: 0.95em; color: #282b2d;">
<p>This chapter is currently under review. Thank you for your patience.</p>
</div>
</div>
</div>
</div>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-2-contents" aria-controls="callout-2" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span style="font-weight: bold; font-size: 1.05em;">TLDR: Shiny Assistant</span>
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-2" class="callout-2-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div style="font-size: 0.95em; color: #282b2d;">
<p>The <a href="https://gallery.shinyapps.io/assistant/">Shiny Assistant</a> is a ‚Äò<em>knowledgeable colleague who is always ready to help out with your Shiny projects, in both R and in Python.</em>‚Äô<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a></p>
<ul>
<li><p>The user interface includes a chat dialogue box with an IDE (with a <strong>Console</strong>, <strong>Source Files</strong>, and <strong>Viewer</strong>).</p></li>
<li><p>Shiny Assistant can be set to return Code only, or a Concise or Verbose description of it‚Äôs response to prompts.</p></li>
<li><p>The assitant can be used to build an application, refactor code into modules or functions, and write <code>roxygen2</code> documentation.</p></li>
<li><p>Applications can be downloaded from the UI or shared by clicking on the <strong>Share</strong> icon and then choosing to share the <strong>Editor</strong> or <strong>Application</strong> URL</p></li>
</ul>
</div>
</div>
</div>
</div>
<!--

https://shiny.posit.co/blog/posts/shiny-assistant/

https://gallery.shinyapps.io/assistant/

-->
<p>The <a href="https://gallery.shinyapps.io/assistant/">Shiny Assistant</a> is an AI-powered chatbot anyone can use to help them build a Shiny application.</p>
<blockquote class="blockquote">
<p>‚Äú<em>you can ask it questions about Shiny, or to create a Shiny application from scratch, or ask it to make changes to an existing application.</em>‚Äù - <a href="https://shiny.posit.co/blog/posts/shiny-assistant/">Shiny Assistant</a>, Winston Chang</p>
</blockquote>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="images/shiny_assist_ui_landing.png" class="lightbox" data-gallery="quarto-lightbox-gallery-1" title="Shiny Assist UI"><img src="images/shiny_assist_ui_landing.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%" alt="Shiny Assist UI"></a></p>
</figure>
</div>
<figcaption>Shiny Assist UI</figcaption>
</figure>
</div>
<div class="callout callout-style-default callout-tip no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-3-contents" aria-controls="callout-3" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span style="font-weight: bold; font-size: 1.15em;">Access the applications in this chapter</span>
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-3" class="callout-3-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div style="font-size: 0.95em; color: #282b2d;">
<p>I‚Äôve created the <a href="https://mjfrigaard.github.io/shinypak/"><code>shinypak</code> R package</a> in an effort to make each section accessible and easy to follow. Install <code>shinypak</code> using <code>pak</code> (or <code>remotes</code>):</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">'pak'</span>)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>pak<span class="sc">::</span><span class="fu">pak</span>(<span class="st">'mjfrigaard/shinypak'</span>)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(shinypak)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>List the apps in this chapter:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">list_apps</span>(<span class="at">regex =</span> <span class="st">'^26'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Launch apps with <code>launch()</code></p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">launch</span>(<span class="at">app =</span> <span class="st">'26_llm-shiny-assist'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Download apps with <code>get_app()</code></p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">get_app</span>(<span class="at">app =</span> <span class="st">'26_llm-shiny-assist'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
<section id="sec-shiny-assist-ui" class="level2 page-columns page-full" data-number="26.1">
<h2 data-number="26.1" class="anchored" data-anchor-id="sec-shiny-assist-ui"><span class="header-section-number">26.1</span> IDE + Chat</h2>

<div class="no-row-height column-margin column-container"><div class="">
<p>Launch app with the <a href="https://mjfrigaard.github.io/shinypak/articles/getting-started.html"><code>shinypak</code> package</a>:</p>
<div style="font-size: 0.65rem;">
<div class="sourceCode" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">launch</span>(<span class="st">'26_llm-shiny-assist'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div></div><p>The UI for Shiny Assistant looks like a standard chat, but if asked to ‚ÄúOpen the editor,‚Äù an IDE opens with a script editor, console, and viewer pane:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="images/shiny_assist_open_editor.png" class="lightbox" data-gallery="quarto-lightbox-gallery-2" title="Shiny Assist Editor"><img src="images/shiny_assist_open_editor.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%" alt="Shiny Assist Editor"></a></p>
</figure>
</div>
<figcaption>Shiny Assist Editor</figcaption>
</figure>
</div>
<p>Shiny Assistant is useful for exploring different UI components, layouts, and styling (colors, themes, fonts, etc.). In this guide, we will build a simple app-package using Shiny Assistant, but we‚Äôll limit the number of prompts to keep it short. For a more detailed example of using Shiny Assistant to create an application, check out <a href="https://www.appsilon.com/post/shiny-assistant">this post on Appsilon‚Äôs blog.</a></p>
<p>The Shiny Assistant is a highly useful tool in your development toolkit, even with limited prompts. Let‚Äôs get started!</p>
<section id="sec-shiny-assist-p1" class="level3" data-number="26.1.1">
<h3 data-number="26.1.1" class="anchored" data-anchor-id="sec-shiny-assist-p1"><span class="header-section-number">26.1.1</span> Prompt 1: Build an app</h3>
<p>Let‚Äôs start by reverse-engineering the primary application in <code>sap</code>. It‚Äôs typical to have data before having an idea for a dashboard or app, so we‚Äôll pass the structure of a simplified version of our <code>movies</code> data to the Shiny Assistant with some instructions on what we‚Äôd like to see::<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a></p>
<p><strong>Prompt</strong>: <code>Create a shiny application that visualizes IMDB movie data using a scatter plot. Include inputs for x, y, color, size, and transparency.</code></p><code>
</code><p><code>The column names are below:</code></p>
<pre>```
Rows: 651
Columns: 18
$ title            <chr> ‚Ä¶
$ genre            <fct> ‚Ä¶
$ runtime          <dbl> ‚Ä¶
$ year             <dbl> ‚Ä¶
$ top200_box       <fct> ‚Ä¶
$ director         <chr> ‚Ä¶
$ mpaa_rating      <fct> ‚Ä¶
$ imdb_rating      <dbl> ‚Ä¶
$ critics_rating   <fct> ‚Ä¶
$ audience_rating  <fct> ‚Ä¶
$ imdb_num_votes   <int> ‚Ä¶
$ critics_score    <dbl> ‚Ä¶
$ audience_score   <dbl> ‚Ä¶
$ best_pic_nom     <fct> ‚Ä¶
$ best_pic_win     <fct> ‚Ä¶
$ best_actor_win   <fct> ‚Ä¶
$ best_actress_win <fct> ‚Ä¶
$ best_dir_win     <fct> ‚Ä¶
```
</fct></fct></fct></fct></fct></dbl></dbl></int></fct></fct></dbl></fct></chr></fct></dbl></dbl></fct></chr></pre>
<p><code>Use the data stored in this URL:</code></p>
<pre>https://raw.githubusercontent.com/mjfrigaard/sap/refs/heads/26_llm-shiny-assist/data-raw/movies_sample.csv

</pre>
<div class="callout callout-style-default callout-tip no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-4-contents" aria-controls="callout-4" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span style="font-weight: bold; font-size: 1.15em;">Tip: Providing data</span>
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-4" class="callout-4-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<div style="font-size: 0.95em; color: #282b2d;">
<p>I‚Äôve found providing a data structure (from <code>str()</code> or <code>dplyr::glimpse()</code>) is incredibly helpful when guiding AI chatbots on building dashboards. <a href="https://gallery.shinyapps.io/assistant/">Shiny Assistant</a> is great because we can even pass it a URL with a .csv data file.</p>
</div>
</div>
</div>
</div>
<p>Below we can see the initial app:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="images/shiny_assist_prompt_01.png" class="lightbox" data-gallery="quarto-lightbox-gallery-3" title="Shiny Assistant: initial app"><img src="images/shiny_assist_prompt_01.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%" alt="Shiny Assistant: initial app"></a></p>
</figure>
</div>
<figcaption>Shiny Assistant: initial app</figcaption>
</figure>
</div>
<p>The initial application has nearly identical input, outputs, and layout. However, we can see an additional checkbox for <strong>Show Movie Titles</strong> and the <strong>Size by</strong> input has been mapped to a variable (not a numerical value).</p>
<p>In our next prompt, we‚Äôll refine the app to match what we have in <code>sap</code> more closely.</p>
</section>
<section id="sec-shiny-assist-p2" class="level3" data-number="26.1.2">
<h3 data-number="26.1.2" class="anchored" data-anchor-id="sec-shiny-assist-p2"><span class="header-section-number">26.1.2</span> Prompt 2: Refine</h3>
<p><strong>Prompt</strong>: <code> Change the size to a numeric slider and include a text input for a plot title. </code></p>
<p>The application is updated with the changesm and we can view the changes to <code>app.R</code> in the Shiny Assistant UI:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="images/shiny_assist_prompt_02.png" class="lightbox" data-gallery="quarto-lightbox-gallery-4" title="Shiny Assistant: initial app"><img src="images/shiny_assist_prompt_02.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%" alt="Shiny Assistant: initial app"></a></p>
</figure>
</div>
<figcaption>Shiny Assistant: initial app</figcaption>
</figure>
</div>
<div class="callout callout-style-default callout-caution no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-5-contents" aria-controls="callout-5" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span style="font-weight: bold; font-size: 1.15em;">Warning: <code>aes_string()</code></span>
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-5" class="callout-5-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<div style="font-size: 0.95em; color: #282b2d;">
<p>We can see the following warning regarding the <code>ggplot2</code> graph:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="images/shiny_assist_aes_string_warning.png" class="lightbox" data-gallery="quarto-lightbox-gallery-5"><img src="images/shiny_assist_aes_string_warning.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%"></a></p>
</figure>
</div>
<p>We avoided this warning with the <code>scatter_plot()</code> utility function in previous branches, but for now, we will just note this is something we should return to and refactor after our application is in a complete state.</p>
</div>
</div>
</div>
</div>
</section>
<section id="sec-shiny-assist-p3" class="level3" data-number="26.1.3">
<h3 data-number="26.1.3" class="anchored" data-anchor-id="sec-shiny-assist-p3"><span class="header-section-number">26.1.3</span> Prompt 3: Modularize</h3>
<p>Now that we have a UI with the correct inputs and outputs, we‚Äôll convert these into modules and separate the application into its respective components.</p>
<p><strong>Prompt</strong>: <code> Convert the inputs and outputs into modules and create a standalone app function that calls separate UI and server functions. </code></p>
<p>The response to this prompt won‚Äôt change the app, but we‚Äôre given a summary of the changes in the chat:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="images/shiny_assist_prompt_03.png" class="lightbox" data-gallery="quarto-lightbox-gallery-6" title="Shiny Assistant: app functions and files"><img src="images/shiny_assist_prompt_03.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%" alt="Shiny Assistant: app functions and files"></a></p>
</figure>
</div>
<figcaption>Shiny Assistant: app functions and files</figcaption>
</figure>
</div>
<p><strong>Response</strong>:</p>
<p><em></em></p><em>
<blockquote class="blockquote">
<p>I‚Äôve modified the code to use a modular structure following these changes:</p>
<ol type="1">
<li><p>Created separate modules for:</p>
<ul>
<li><p>Controls (inputs) - <code>controlsUI</code> and <code>controlsServer</code></p></li>
<li><p>Plot (output) - <code>plotOutputUI</code> and <code>plotOutputServer</code></p></li>
<li><p>About data section - <code>aboutDataUI</code> (UI only as it‚Äôs static)</p></li>
</ul></li>
<li><p>Created standalone UI and server functions:</p>
<ul>
<li><p><code>ui_function()</code> - assembles all UI components</p></li>
<li><p><code>server_function()</code> - coordinates between modules</p></li>
</ul></li>
<li><p>Created an application function:</p>
<ul>
<li><code>movie_visualization_app()</code> - bundles everything together</li>
</ul></li>
<li><p>The communication between modules:</p>
<ul>
<li><p>The controls module returns all inputs as a reactive list</p></li>
<li><p>The plot module takes two parameters: the data and controls reactives</p></li>
</ul></li>
</ol>
<p>This modular approach makes the code more maintainable and easier to extend. Each component has a well-defined responsibility, and they communicate through clear interfaces.</p>
</blockquote>
</em><p><em></em></p>
<p>I‚Äôve left the Shiny Assistant chat setting to <strong>Verbose</strong>, but this can be changed to return less descriptive details on the code being produced:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="images/shiny_assist_verbose_setting.png" class="lightbox" data-gallery="quarto-lightbox-gallery-7" title="Shiny Assistant Chat setting"><img src="images/shiny_assist_verbose_setting.png" class="img-fluid figure-img" alt="Shiny Assistant Chat setting"></a></p>
<figcaption>Shiny Assistant Chat setting</figcaption>
</figure>
</div>
</section>
<section id="sec-shiny-assist-p4" class="level3" data-number="26.1.4">
<h3 data-number="26.1.4" class="anchored" data-anchor-id="sec-shiny-assist-p4"><span class="header-section-number">26.1.4</span> Prompt 4: Structure</h3>
<p>We‚Äôll attempt to create individual function files and documentation in a single prompt to begin re-structuring the app as an R package.</p>
<p><strong>Prompt</strong>: <code> Store the modules, UI, server, and standalone app functions in separate files and include roxygen2 documentation. </code></p>
<p>This results in an error when the Shiny Assistant tries to run our updates:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="images/shiny_assist_prompt_04.png" class="lightbox" data-gallery="quarto-lightbox-gallery-8" title="Shiny Assistant: error"><img src="images/shiny_assist_prompt_04.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%" alt="Shiny Assistant: error"></a></p>
</figure>
</div>
<figcaption>Shiny Assistant: error</figcaption>
</figure>
</div>
<p>The response summary tells us what has been changed, but it doesn‚Äôt give us advice on (or even acknowledge) the error.</p>
<p><strong>Response</strong>:</p>
<p><em></em></p><em>
<blockquote class="blockquote">
<p>I‚Äôve reorganized the code into separate files with <code>roxygen2</code> documentation:</p>
<ol type="1">
<li><p><strong><code>controls_module.R</code></strong>: Contains the UI and server functions for the controls module with full roxygen2 documentation including parameters, return values, and imported functions.</p></li>
<li><p><strong><code>plot_module.R</code></strong>: Contains the UI and server functions for the plot output module with documentation for both components.</p></li>
<li><p><strong><code>about_module.R</code></strong>: Contains the UI function for the about data section.</p></li>
<li><p>**<code>ui.R</code>*: Contains the main UI function that assembles all UI components.</p></li>
<li><p><strong><code>server.R</code></strong>: Contains the main server function that coordinates between modules.</p></li>
<li><p><strong><code>app.R</code></strong>: Contains the standalone app function that sources all other files and runs the application.</p></li>
</ol>
<p>Each function includes proper roxygen2 documentation with:</p>
<ul>
<li><p>Function descriptions</p></li>
<li><p>Parameter descriptions</p></li>
<li><p>Return value descriptions</p></li>
<li><p><code>@importFrom</code> tags for explicit dependencies</p></li>
<li><p><code>@export</code> tags for functions that should be exported</p></li>
</ul>
<p>The <code>app.R</code> file also includes logic to run the app only if the file is being executed directly in an interactive session.</p>
</blockquote>
</em><p><em></em></p>
</section>
<section id="sec-shiny-assist-p5" class="level3" data-number="26.1.5">
<h3 data-number="26.1.5" class="anchored" data-anchor-id="sec-shiny-assist-p5"><span class="header-section-number">26.1.5</span> Prompt 5: Error</h3>
<p>The error above tells us the <code>bslib::page_sidebar()</code> function isn‚Äôt being loaded before <code>runApp()</code> is being called, but the call to <code>library(bslib)</code> is in the <code>app.R</code> file. We‚Äôll see if providing some direction on function/file names and where to call <code>shinyApp()</code> will resolve this error:</p>
<p><strong>Prompt</strong>: <code> An error occurred because the <code>page_sidebar</code> function could not be found. The <code>app.R</code> file needs to contain the <code>library()</code> and <code>source()</code> calls before the call to <code>shinyApp()</code>. Also, rename the <code>ui.R</code> and <code>server.R</code> to <code>app_ui.R</code> and <code>app_server.R</code>. </code></p>
<p>This results in the following changes to the app code structure:</p>
<p><strong>Response</strong>:</p>
<p><em></em></p><em>
<blockquote class="blockquote">
<p>I‚Äôve made the following changes to fix the issues:</p>
<ol type="1">
<li><p>Renamed the files:</p>
<ul>
<li><p>Changed <code>ui.R</code> to <code>app_ui.R</code></p></li>
<li><p>Changed <code>server.R</code> to <code>app_server.R</code></p></li>
</ul></li>
<li><p>Modified the <code>app.R</code> file to:</p>
<ul>
<li><p>Load all required libraries at the beginning of the file</p></li>
<li><p>Source all module and function files</p></li>
<li><p>Define the <code>movie_visualization_app()</code> function</p></li>
<li><p>Call the function directly (removed the <code>if (interactive())</code> check to ensure it runs)</p></li>
</ul></li>
<li><p>Maintained the same structure for all modules and functions</p></li>
</ol>
<p>These changes ensure that:</p>
<ol type="1">
<li><p>All necessary files are sourced before using their functions</p></li>
<li><p>The application will properly find all functions when running</p></li>
<li><p>The organization follows a more standard Shiny module structure</p></li>
</ol>
<p>The application should now run without the ‚Äúpage_sidebar function could not be found‚Äù error since we‚Äôre properly sourcing all the module files before they‚Äôre used in the UI and server functions.</p>
</blockquote>
</em><p><em></em></p>
<p>In the <code>app.R</code> file, if we explicitly run the call to <code>library(bslib)</code> and then <code>source("app_ui.R")</code> (which contains the call to <code>bslib::page_sidebar()</code>), we see these are executed without errors in the <strong>Console</strong>:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="images/shiny_assist_library_source_calls.png" class="lightbox" data-gallery="quarto-lightbox-gallery-9" title="Shiny Assistant: library() and source() calls"><img src="images/shiny_assist_library_source_calls.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%" alt="Shiny Assistant: library() and source() calls"></a></p>
</figure>
</div>
<figcaption>Shiny Assistant: <code>library()</code> and <code>source()</code> calls</figcaption>
</figure>
</div>
<p>However, when we try to source and call our standalone app function, we see the following error:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="images/shiny_assist_run_app_error.png" class="lightbox" data-gallery="quarto-lightbox-gallery-10" title="Shiny Assistant: runApp() error"><img src="images/shiny_assist_run_app_error.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%" alt="Shiny Assistant: runApp() error"></a></p>
</figure>
</div>
<figcaption>Shiny Assistant: <code>runApp()</code> error</figcaption>
</figure>
</div>
<div class="sourceCode" id="cb6"><pre class="sourceCode default code-with-copy"><code class="sourceCode default"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>Error in runApp(x) :</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  Can't call `runApp()` from within `runApp()`. If your application code </span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  contains`runApp()`, please remove it.</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The error is a little tricky, because the standalone app function calls <code>shinyApp()</code>, not <code>runApp()</code>. But Shiny Assistant launches applications by calling <code>runApp()</code> when we click on the icon in the upper right-hand corner of the source editor:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="images/shiny_assist_prompt_05.png" class="lightbox" data-gallery="quarto-lightbox-gallery-11" title="Shiny Assistant: run the app using the ‚ÄòRun App‚Äô icon"><img src="images/shiny_assist_prompt_05.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%" alt="Shiny Assistant: run the app using the ‚ÄòRun App‚Äô icon"></a></p>
</figure>
</div>
<figcaption>Shiny Assistant: run the app using the ‚ÄòRun App‚Äô icon</figcaption>
</figure>
</div>
<p>Clicking on the icon will launch the application (we don‚Äôt need to call the standalone app function).</p>
</section>
<section id="sec-shiny-assist-p6" class="level3" data-number="26.1.6">
<h3 data-number="26.1.6" class="anchored" data-anchor-id="sec-shiny-assist-p6"><span class="header-section-number">26.1.6</span> Bonus: Theme</h3>
<p>We have modules, UI and server functions, <code>roxygen2</code> documentation, and an <code>app.R</code> file. We‚Äôll finish by adding a dark <a href="https://rstudio.github.io/thematic/"><code>thematic</code> theme</a>:</p>
<p><strong>Prompt</strong>: <code> Add a dark theme using the thematic package: https://rstudio.github.io/thematic/ </code></p>
<p>The updated app includes a dark theme:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="images/shiny_assist_prompt_06.png" class="lightbox" data-gallery="quarto-lightbox-gallery-12" title="Shiny Assistant: thematic theme"><img src="images/shiny_assist_prompt_06.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%" alt="Shiny Assistant: thematic theme"></a></p>
</figure>
</div>
<figcaption>Shiny Assistant: <code>thematic</code> theme</figcaption>
</figure>
</div>
<p>And the summary of changes is below:</p>
<p><strong>Response</strong>:</p>
<p><em></em></p><em>
<blockquote class="blockquote">
<p>I‚Äôve integrated the thematic package to add a dark theme to the application. Here are the changes I made:</p>
<ol type="1">
<li><p>Added <code>library(thematic)</code> to the app.R file to load the thematic package.</p></li>
<li><p>Added <code>thematic_shiny(font = "auto")</code> to automatically adjust plot themes to match the app theme. This automatically styles the ggplot2 visualizations to match the Shiny app‚Äôs theme.</p></li>
<li><p>Modified the UI function in app_ui.R to use a dark theme:</p>
<ul>
<li><p>Created a dark theme using <code>bs_theme()</code> from bslib with dark background colors, light text, and appropriate accent colors</p></li>
<li><p>Applied the theme to the <code>page_sidebar()</code> using the <code>theme</code> parameter</p></li>
</ul></li>
<li><p>Updated the plot_module.R to work with thematic:</p>
<ul>
<li><p>Removed the explicit <code>theme_minimal()</code> call since thematic will handle the base theming</p></li>
<li><p>Kept specific theme adjustments for title styling and legend positioning</p></li>
</ul></li>
</ol>
<p>The thematic package now automatically coordinates the ggplot2 theme with the application‚Äôs dark theme, creating a cohesive dark mode experience throughout the entire application. The plots will automatically inherit the dark background and appropriate colors for text and elements.</p>
</blockquote>
</em><p><em></em></p>
</section>
</section>
<section id="sec-shiny-assist-download" class="level2" data-number="26.2">
<h2 data-number="26.2" class="anchored" data-anchor-id="sec-shiny-assist-download"><span class="header-section-number">26.2</span> Download files</h2>
<p>After confirming the new theme works, we‚Äôll download the app files by clicking on the cloud icon in the upper right-hand corner of the <strong>Viewer</strong>:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="images/shiny_assist_download.png" class="lightbox" data-gallery="quarto-lightbox-gallery-13" title="Download files"><img src="images/shiny_assist_download.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:70.0%" alt="Download files"></a></p>
</figure>
</div>
<figcaption>Download files</figcaption>
</figure>
</div>
<p>This assumes we‚Äôve already created a local app-package directory using the methods described in <a href="packages.html#sec-packages-essential-ingredients" class="quarto-xref"><span>Section 3.1.1</span></a> or with a <a href="./frameworks.html">Shiny framework.</a></p>
</section>
<section id="sec-shiny-assist-finishing-touches" class="level2" data-number="26.3">
<h2 data-number="26.3" class="anchored" data-anchor-id="sec-shiny-assist-finishing-touches"><span class="header-section-number">26.3</span> Finishing touches</h2>
<p>I‚Äôve placed the downloaded files in the <code>inst/shiny-assist/movies</code> directory in <code>sap</code>. The modules and UI/server functions are moved into an internal <code>R/</code> folder, and place the standalone app function in it‚Äôs own file:</p>
<div class="sourceCode" id="annotated-cell-2"><pre class="sourceCode default code-annotation-code code-with-copy code-annotated"><code class="sourceCode default"><span id="annotated-cell-2-1"><a href="#annotated-cell-2-1" aria-hidden="true" tabindex="-1"></a>inst/shiny-assist/</span>
<span id="annotated-cell-2-2"><a href="#annotated-cell-2-2" aria-hidden="true" tabindex="-1"></a>‚îî‚îÄ‚îÄ movies</span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-2" data-target-annotation="1">1</button><span id="annotated-cell-2-3" class="code-annotation-target"><a href="#annotated-cell-2-3" aria-hidden="true" tabindex="-1"></a>    ‚îú‚îÄ‚îÄ R</span>
<span id="annotated-cell-2-4"><a href="#annotated-cell-2-4" aria-hidden="true" tabindex="-1"></a>    ‚îÇ   ‚îú‚îÄ‚îÄ about_module.R</span>
<span id="annotated-cell-2-5"><a href="#annotated-cell-2-5" aria-hidden="true" tabindex="-1"></a>    ‚îÇ   ‚îú‚îÄ‚îÄ app_server.R</span>
<span id="annotated-cell-2-6"><a href="#annotated-cell-2-6" aria-hidden="true" tabindex="-1"></a>    ‚îÇ   ‚îú‚îÄ‚îÄ app_ui.R</span>
<span id="annotated-cell-2-7"><a href="#annotated-cell-2-7" aria-hidden="true" tabindex="-1"></a>    ‚îÇ   ‚îú‚îÄ‚îÄ controls_module.R</span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-2" data-target-annotation="2">2</button><span id="annotated-cell-2-8" class="code-annotation-target"><a href="#annotated-cell-2-8" aria-hidden="true" tabindex="-1"></a>    ‚îÇ   ‚îú‚îÄ‚îÄ movie_visualization_app.R</span>
<span id="annotated-cell-2-9"><a href="#annotated-cell-2-9" aria-hidden="true" tabindex="-1"></a>    ‚îÇ   ‚îî‚îÄ‚îÄ plot_module.R</span>
<span id="annotated-cell-2-10"><a href="#annotated-cell-2-10" aria-hidden="true" tabindex="-1"></a>    ‚îî‚îÄ‚îÄ app.R</span>
<span id="annotated-cell-2-11"><a href="#annotated-cell-2-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="annotated-cell-2-12"><a href="#annotated-cell-2-12" aria-hidden="true" tabindex="-1"></a>3 directories, 7 files</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<dl class="code-annotation-container-hidden code-annotation-container-grid">
<dt data-target-cell="annotated-cell-2" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-2" data-code-lines="3" data-code-annotation="1"><code>R/</code> folder for modules and functions</span>
</dd>
<dt data-target-cell="annotated-cell-2" data-target-annotation="2">2</dt>
<dd>
<span data-code-cell="annotated-cell-2" data-code-lines="8" data-code-annotation="2">Standalone app function</span>
</dd>
</dl>
<p>The app-package structure starting to take shape!</p>
<section id="the-app.r-file" class="level3" data-number="26.3.1">
<h3 data-number="26.3.1" class="anchored" data-anchor-id="the-app.r-file"><span class="header-section-number">26.3.1</span> The <code>app.R</code> file</h3>
<p>The <code>app.R</code> file no longer needs to <code>source()</code> the modules and app functions if they are placed in an <code>R/</code> folder.<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load required libraries</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(shiny)</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(bslib)</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(thematic)</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Setup thematic to automatically adjust plot theme to match app theme</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a><span class="fu">thematic_shiny</span>(<span class="at">font =</span> <span class="st">"auto"</span>)</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Run the application </span></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a><span class="fu">movie_visualization_app</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now <code>app.R</code> only loads the packages, sets the theme, and launches the app.</p>
<p>In Positron, we can see the <strong>Run App</strong> icon is present at the top of <code>app.R</code>, and it‚Äôs fully functional:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="images/shiny_assist_positron_launch.png" class="lightbox" data-gallery="quarto-lightbox-gallery-14" title="Shiny Assistant app launced in Positron"><img src="images/shiny_assist_positron_launch.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%" alt="Shiny Assistant app launced in Positron"></a></p>
</figure>
</div>
<figcaption>Shiny Assistant app launced in Positron</figcaption>
</figure>
</div>
</section>
<section id="ggplot2-warnings" class="level3" data-number="26.3.2">
<h3 data-number="26.3.2" class="anchored" data-anchor-id="ggplot2-warnings"><span class="header-section-number">26.3.2</span> <code>ggplot2</code> warnings</h3>
<p>We‚Äôve have a persistent warning printed to the console about the use of <code>aes_string()</code> in our <code>plot_module.R</code>.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="images/shiny_assist_aes_string_warning.png" class="lightbox" data-gallery="quarto-lightbox-gallery-15" title="ggplot2::aes_string() warning"><img src="images/shiny_assist_aes_string_warning.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%" alt="ggplot2::aes_string() warning"></a></p>
</figure>
</div>
<figcaption><code>ggplot2::aes_string()</code> warning</figcaption>
</figure>
</div>
<p>The solution is to convert the <code>aes_string()</code> to use <code>rlang::sym()</code> and <code>!!</code>.</p>
<div>

</div>
<div class="quarto-layout-panel" data-layout="[50, 50]">
<div class="quarto-layout-row quarto-layout-valign-top">
<section id="aes_string" class="level5 unnumbered quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<h5 class="unnumbered anchored" data-anchor-id="aes_string"><span style="font-weight: bold;"><code>aes_string()</code></span></h5>
<div class="sourceCode" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create base plot</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(<span class="fu">data</span>(), </span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>        ggplot2<span class="sc">::</span><span class="fu">aes_string</span>(</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">x =</span> ctrl<span class="sc">$</span>x_var, </span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">y =</span> ctrl<span class="sc">$</span>y_var)</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>      )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="rlangsym" class="level5 unnumbered quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<h5 class="unnumbered anchored" data-anchor-id="rlangsym"><span style="font-weight: bold;"><code>rlang::sym()</code> &amp; <code>!!</code></span></h5>
<div class="sourceCode" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># convert to symbols </span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>x_var <span class="ot">&lt;-</span> rlang<span class="sc">::</span><span class="fu">sym</span>(ctrl<span class="sc">$</span>x_var)</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>y_var <span class="ot">&lt;-</span> rlang<span class="sc">::</span><span class="fu">sym</span>(ctrl<span class="sc">$</span>y_var)</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Create base plot</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>          <span class="fu">data</span>(), </span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>        ggplot2<span class="sc">::</span><span class="fu">aes</span>(</span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>          <span class="co"># use double bang!!</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>            <span class="at">x =</span> <span class="sc">!!</span>x_var, </span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>            <span class="at">y =</span> <span class="sc">!!</span>y_var</span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>            )</span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>          )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</div>
</div>
<div>

</div>
<div class="quarto-layout-panel" data-layout="[50, 50]">
<div class="quarto-layout-row quarto-layout-valign-top">
<section id="aes_string-1" class="level5 unnumbered quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<h5 class="unnumbered anchored" data-anchor-id="aes_string-1"><span style="font-weight: bold;"><code>aes_string()</code></span></h5>
<div class="sourceCode" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Add color if selected</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (ctrl<span class="sc">$</span>color_var <span class="sc">!=</span> <span class="st">"none"</span>) {</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>  p <span class="ot">&lt;-</span> p <span class="sc">+</span> <span class="fu">aes_string</span>(</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>              <span class="at">color =</span> ctrl<span class="sc">$</span>color_var</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>              )</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="rlangsym-1" class="level5 unnumbered quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<h5 class="unnumbered anchored" data-anchor-id="rlangsym-1"><span style="font-weight: bold;"><code>rlang::sym()</code> &amp; <code>!!</code></span></h5>
<div class="sourceCode" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Add color if selected</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (ctrl<span class="sc">$</span>color_var <span class="sc">!=</span> <span class="st">"none"</span>) {</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># convert to symbols </span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>  color_var <span class="ot">&lt;-</span> rlang<span class="sc">::</span><span class="fu">sym</span>(ctrl<span class="sc">$</span>color_var)</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>  p <span class="ot">&lt;-</span> p <span class="sc">+</span> ggplot2<span class="sc">::</span><span class="fu">aes</span>(</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>              <span class="co"># use double bang!!</span></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>              <span class="at">color =</span> <span class="sc">!!</span>color_var</span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>              )</span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</div>
</div>
<p>The final step is to add this app to our <code>launch_app()</code> function:</p>
<div class="cell">
<details open="" class="code-fold">
<summary>show/hide updated launch_app() function</summary>
<div class="sourceCode cell-code" id="annotated-cell-4"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><span id="annotated-cell-4-1"><a href="#annotated-cell-4-1" aria-hidden="true" tabindex="-1"></a>launch_app <span class="ot">&lt;-</span> <span class="cf">function</span>(<span class="at">app =</span> <span class="cn">NULL</span>, <span class="at">options =</span> <span class="fu">list</span>(), <span class="at">run =</span> <span class="st">"p"</span>, ...) {</span>
<span id="annotated-cell-4-2"><a href="#annotated-cell-4-2" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">interactive</span>()) {</span>
<span id="annotated-cell-4-3"><a href="#annotated-cell-4-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">display_type</span>(<span class="at">run =</span> run)</span>
<span id="annotated-cell-4-4"><a href="#annotated-cell-4-4" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="annotated-cell-4-5"><a href="#annotated-cell-4-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="annotated-cell-4-6"><a href="#annotated-cell-4-6" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">is.null</span>(app)) {</span>
<span id="annotated-cell-4-7"><a href="#annotated-cell-4-7" aria-hidden="true" tabindex="-1"></a>    app <span class="ot">&lt;-</span> <span class="st">"movies"</span></span>
<span id="annotated-cell-4-8"><a href="#annotated-cell-4-8" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="annotated-cell-4-9"><a href="#annotated-cell-4-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="annotated-cell-4-10"><a href="#annotated-cell-4-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">logr_msg</span>(glue<span class="sc">::</span><span class="fu">glue</span>(<span class="st">"Launching app: {app}"</span>),</span>
<span id="annotated-cell-4-11"><a href="#annotated-cell-4-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">level =</span> <span class="st">"INFO"</span></span>
<span id="annotated-cell-4-12"><a href="#annotated-cell-4-12" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="annotated-cell-4-13"><a href="#annotated-cell-4-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="annotated-cell-4-14"><a href="#annotated-cell-4-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tryCatch</span>({</span>
<span id="annotated-cell-4-15"><a href="#annotated-cell-4-15" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> (app <span class="sc">==</span> <span class="st">"bslib"</span>) {</span>
<span id="annotated-cell-4-16"><a href="#annotated-cell-4-16" aria-hidden="true" tabindex="-1"></a>        <span class="fu">shinyApp</span>(</span>
<span id="annotated-cell-4-17"><a href="#annotated-cell-4-17" aria-hidden="true" tabindex="-1"></a>          <span class="at">ui =</span> <span class="fu">movies_ui</span>(<span class="at">bslib =</span> <span class="cn">TRUE</span>),</span>
<span id="annotated-cell-4-18"><a href="#annotated-cell-4-18" aria-hidden="true" tabindex="-1"></a>          <span class="at">server =</span> movies_server,</span>
<span id="annotated-cell-4-19"><a href="#annotated-cell-4-19" aria-hidden="true" tabindex="-1"></a>          <span class="at">options =</span> options</span>
<span id="annotated-cell-4-20"><a href="#annotated-cell-4-20" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="annotated-cell-4-21"><a href="#annotated-cell-4-21" aria-hidden="true" tabindex="-1"></a>      } <span class="cf">else</span> <span class="cf">if</span> (app <span class="sc">==</span> <span class="st">"ggp2"</span>) {</span>
<span id="annotated-cell-4-22"><a href="#annotated-cell-4-22" aria-hidden="true" tabindex="-1"></a>        <span class="fu">shinyAppDir</span>(</span>
<span id="annotated-cell-4-23"><a href="#annotated-cell-4-23" aria-hidden="true" tabindex="-1"></a>          <span class="at">appDir =</span> <span class="fu">system.file</span>(<span class="st">"tidy-movies"</span>, <span class="at">package =</span> <span class="st">"sap"</span>),</span>
<span id="annotated-cell-4-24"><a href="#annotated-cell-4-24" aria-hidden="true" tabindex="-1"></a>          <span class="at">options =</span> options</span>
<span id="annotated-cell-4-25"><a href="#annotated-cell-4-25" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="annotated-cell-4-26"><a href="#annotated-cell-4-26" aria-hidden="true" tabindex="-1"></a>      } <span class="cf">else</span> <span class="cf">if</span> (app <span class="sc">==</span> <span class="st">"quarto"</span>) {</span>
<span id="annotated-cell-4-27"><a href="#annotated-cell-4-27" aria-hidden="true" tabindex="-1"></a>        quarto<span class="sc">::</span><span class="fu">quarto_preview</span>(</span>
<span id="annotated-cell-4-28"><a href="#annotated-cell-4-28" aria-hidden="true" tabindex="-1"></a>          <span class="fu">system.file</span>(<span class="st">"quarto"</span>, <span class="st">"index.qmd"</span>, <span class="at">package =</span> <span class="st">"sap"</span>),</span>
<span id="annotated-cell-4-29"><a href="#annotated-cell-4-29" aria-hidden="true" tabindex="-1"></a>          <span class="at">render =</span> <span class="st">"all"</span></span>
<span id="annotated-cell-4-30"><a href="#annotated-cell-4-30" aria-hidden="true" tabindex="-1"></a>        )</span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-4" data-target-annotation="1">1</button><span id="annotated-cell-4-31" class="code-annotation-target"><a href="#annotated-cell-4-31" aria-hidden="true" tabindex="-1"></a>      } <span class="cf">else</span> <span class="cf">if</span> (app <span class="sc">==</span> <span class="st">"assist"</span>) {</span>
<span id="annotated-cell-4-32"><a href="#annotated-cell-4-32" aria-hidden="true" tabindex="-1"></a>        <span class="fu">shinyAppDir</span>(</span>
<span id="annotated-cell-4-33"><a href="#annotated-cell-4-33" aria-hidden="true" tabindex="-1"></a>          <span class="at">appDir =</span> <span class="fu">system.file</span>(<span class="st">"shiny-assist"</span>, <span class="at">package =</span> <span class="st">"sap"</span>),</span>
<span id="annotated-cell-4-34"><a href="#annotated-cell-4-34" aria-hidden="true" tabindex="-1"></a>          <span class="at">options =</span> options</span>
<span id="annotated-cell-4-35"><a href="#annotated-cell-4-35" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="annotated-cell-4-36"><a href="#annotated-cell-4-36" aria-hidden="true" tabindex="-1"></a>      } <span class="cf">else</span> {</span>
<span id="annotated-cell-4-37"><a href="#annotated-cell-4-37" aria-hidden="true" tabindex="-1"></a>        <span class="fu">shinyApp</span>(</span>
<span id="annotated-cell-4-38"><a href="#annotated-cell-4-38" aria-hidden="true" tabindex="-1"></a>          <span class="at">ui =</span> <span class="fu">movies_ui</span>(...),</span>
<span id="annotated-cell-4-39"><a href="#annotated-cell-4-39" aria-hidden="true" tabindex="-1"></a>          <span class="at">server =</span> movies_server,</span>
<span id="annotated-cell-4-40"><a href="#annotated-cell-4-40" aria-hidden="true" tabindex="-1"></a>          <span class="at">options =</span> options</span>
<span id="annotated-cell-4-41"><a href="#annotated-cell-4-41" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="annotated-cell-4-42"><a href="#annotated-cell-4-42" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="annotated-cell-4-43"><a href="#annotated-cell-4-43" aria-hidden="true" tabindex="-1"></a>    }, <span class="at">error =</span> <span class="cf">function</span>(e) {</span>
<span id="annotated-cell-4-44"><a href="#annotated-cell-4-44" aria-hidden="true" tabindex="-1"></a>      <span class="fu">logr_msg</span>(glue<span class="sc">::</span><span class="fu">glue</span>(<span class="st">"FATAL: Application failed to launch. Reason: {e$message}"</span>),</span>
<span id="annotated-cell-4-45"><a href="#annotated-cell-4-45" aria-hidden="true" tabindex="-1"></a>        <span class="at">level =</span> <span class="st">"FATAL"</span></span>
<span id="annotated-cell-4-46"><a href="#annotated-cell-4-46" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="annotated-cell-4-47"><a href="#annotated-cell-4-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="annotated-cell-4-48"><a href="#annotated-cell-4-48" aria-hidden="true" tabindex="-1"></a>      <span class="fu">stop</span>(<span class="st">"Application launch failed. Check logs for details."</span>)</span>
<span id="annotated-cell-4-49"><a href="#annotated-cell-4-49" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="annotated-cell-4-50"><a href="#annotated-cell-4-50" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="annotated-cell-4-51"><a href="#annotated-cell-4-51" aria-hidden="true" tabindex="-1"></a>}</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-annotation">
<dl class="code-annotation-container-hidden code-annotation-container-grid">
<dt data-target-cell="annotated-cell-4" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-4" data-code-lines="31,35" data-code-annotation="1">New Shiny Assistant application</span>
</dd>
</dl>
</div>
</div>
</section>
</section>
<section id="recap" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="recap">Recap</h2>
<p>This chapter covered building a Shiny app ‚Äòfit for a package‚Äô using the Shiny Assistant. As you can see, in just a few prompts, we can have a Shiny application that ~80% ready to be loaded, installed, and launched. The callout box below includes a few items to watch out for when using Shiny Assistant to build apps:</p>
<div class="callout callout-style-default callout-tip no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-6-contents" aria-controls="callout-6" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span style="font-weight: bold; font-size: 1.15em;">Recap: Shiny Assistant</span>
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-6" class="callout-6-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<div style="font-size: 1.05em; color: #282b2d;">
<p>Shiny Assistant is a powerful tool for building Shiny apps. With the right prompting, the application code can be easily structured into an R package. The only caveats I‚Äôve found are:</p>
<ul>
<li><p><strong>Deprecated functions</strong>: the <code>ggplot2</code> (<code>aes_string()</code>) warning is an example of somthing that might require more specific prompting (or knowledge of <code>rlang</code>/<code>ggplot2</code>).</p></li>
<li><p><strong>Documentation/Dependencies</strong>: the <code>roxygen2</code> documentation generated by Shiny Assistant used copius <code>@importFrom</code> and <code>@import</code> tags, which is something <a href="https://roxygen2.r-lib.org/articles/namespace.html#imports">we want to avoid.</a></p></li>
<li><p><strong>Module structure</strong>: Shiny Assistant came up with a different module structure than we had in our previous branches, but that‚Äôs not to say it‚Äôs incorrect. However, it‚Äôs important to check the reactivity and understand how the namespaces and reactive inputs are managed in the application before putting it into production.</p></li>
</ul>
</div>
</div>
</div>
</div>


</section>
<section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes">
<hr>
<ol>
<li id="fn1"><p>Read more in the <a href="https://shiny.posit.co/blog/posts/shiny-assistant/">Shiny Assistant post</a> on the Shiny blog.<a href="#fnref1" class="footnote-back" role="doc-backlink">‚Ü©Ô∏é</a></p></li>
<li id="fn2"><p>I‚Äôve included a .csv version of these data in the <a href="https://raw.githubusercontent.com/mjfrigaard/sap/refs/heads/26_llm-shiny-assist/data-raw/movies_sample.csv"><code>data-raw/</code> folder of this branch</a>.<a href="#fnref2" class="footnote-back" role="doc-backlink">‚Ü©Ô∏é</a></p></li>
<li id="fn3"><p><code>loadSupport()</code> was covered back in <a href="shiny.html#sec-shiny-folders" class="quarto-xref"><span>Section 2.3</span></a>.<a href="#fnref3" class="footnote-back" role="doc-backlink">‚Ü©Ô∏é</a></p></li>
</ol>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "Óßã";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/mjfrigaard\.github\.io\/shiny-app-pkgs\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      const annoteTargets = window.document.querySelectorAll('.code-annotation-anchor');
      for (let i=0; i<annoteTargets.length; i++) {
        const annoteTarget = annoteTargets[i];
        const targetCell = annoteTarget.getAttribute("data-target-cell");
        const targetAnnotation = annoteTarget.getAttribute("data-target-annotation");
        const contentFn = () => {
          const content = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          if (content) {
            const tipContent = content.cloneNode(true);
            tipContent.classList.add("code-annotation-tip-content");
            return tipContent.outerHTML;
          }
        }
        const config = {
          allowHTML: true,
          content: contentFn,
          onShow: (instance) => {
            selectCodeLines(instance.reference);
            instance.reference.classList.add('code-annotation-active');
            window.tippy.hideAll();
          },
          onHide: (instance) => {
            unselectCodeLines();
            instance.reference.classList.remove('code-annotation-active');
          },
          maxWidth: 300,
          delay: [50, 0],
          duration: [200, 0],
          offset: [5, 10],
          arrow: true,
          appendTo: function(el) {
            return el.parentElement.parentElement.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'quarto',
          placement: 'right',
          popperOptions: {
            modifiers: [
            {
              name: 'flip',
              options: {
                flipVariations: false, // true by default
                allowedAutoPlacements: ['right'],
                fallbackPlacements: ['right', 'top', 'top-start', 'top-end', 'bottom', 'bottom-start', 'bottom-end', 'left'],
              },
            },
            {
              name: 'preventOverflow',
              options: {
                mainAxis: false,
                altAxis: false
              }
            }
            ]        
          }      
        };
        window.tippy(annoteTarget, config); 
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./tools.html" class="pagination-link" aria-label="Shiny LLM Tools">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Shiny LLM Tools</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./ellmer.html" class="pagination-link" aria-label="ellmer">
        <span class="nav-page-text"><span class="chapter-number">27</span>&nbsp; <span class="chapter-title">ellmer</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer"><div class="nav-footer"><div class="nav-footer-center"><div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/mjfrigaard/shiny-app-pkgs/edit/main/shiny_assist.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/mjfrigaard/shiny-app-pkgs/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></div></div></footer><script>var lightboxQuarto = GLightbox({"closeEffect":"zoom","descPosition":"bottom","loop":false,"openEffect":"zoom","selector":".lightbox"});
(function() {
  let previousOnload = window.onload;
  window.onload = () => {
    if (previousOnload) {
      previousOnload();
    }
    lightboxQuarto.on('slide_before_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      const href = trigger.getAttribute('href');
      if (href !== null) {
        const imgEl = window.document.querySelector(`a[href="${href}"] img`);
        if (imgEl !== null) {
          const srcAttr = imgEl.getAttribute("src");
          if (srcAttr && srcAttr.startsWith("data:")) {
            slideConfig.href = srcAttr;
          }
        }
      } 
    });
  
    lightboxQuarto.on('slide_after_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(slideNode);
      }
    });
  
  };
  
})();
          </script>




</body></html>